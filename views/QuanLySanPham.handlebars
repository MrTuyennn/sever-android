<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <head>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    </head>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

    <!-- link CSS -->
    <link rel="stylesheet" href="../public/css/QuanLySanPham.css">
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    {{!-- data tables --}}
    <link href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
    {{!-- <link href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap.min.css" rel="stylesheet" /> --}}

    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    {{!-- <script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.min.js"></script> --}}
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-3">
                <div class="row" style="background:#9932CC;opacity: 0.7">
                    <a style="margin-left: 100px;font-size: 30px;color: white;">BRCZE5</a>
                </div>
            </div>
            <div class="col-sm-9">
                <a style="font-size: 20px;color: black;float: left;margin-top: 10px;margin-right: 50px;">Quản Lý Sản
                    Phẩm</a>
                <form class="form-inline" action="/quanlysanpham" style="margin-top: 5px;float: left;">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">
                                <i class='far fa-eye' style='font-size:24px;color: black;'></i>
                            </span>
                        </div>
                        <input type="text" class="form-control" placeholder="Tìm Kiếm">
                    </div>
                </form>
                <a style="float: left;margin-left: 200px;margin-top: 10px;">Tài Khoản</a>
                <a style="float: left;margin-top: 10px;margin-left: 30px;">Đăng Xuất</a>
            </div>
        </div>
        <div class="row" style="height: 680px;">
            <div class="col-sm-3 border" style="background:#9932CC;opacity: 0.7;">
                <button type="button" class="btn">
                    <i class='far fa-user-circle'></i>
                    <span>
                        <a href="hosoadmin"> Hồ Sơ Admin</a>
                    </span>

                </button>
                <button type="button" class="btn">
                    <i class='fab fa-bity'></i>
                    <span>
                        <a href="quanlynguoidung">Quản Lý Người Dùng</a>
                    </span>
                </button>
                <button type="button" class="btn">
                    <i class='fas fa-book'></i>
                    <span>
                        <a href="quanlysanpham">Quản Lý Sản Phẩm</a>
                    </span>
                </button>
                <button type="button" class="btn">
                    <i class="fa fa-file-text-o"></i>
                    <a style="color: white;">Quản Lý Hóa Đơn</a>
                </button>
                <button type="button" class="btn">
                    <i class='fas fa-atom'></i>
                    <span>
                        <a href="quanlyloaisanpham">Phân Loại Sản Phẩm</a>
                    </span>
                </button>
                <button type="button" class="btn">
                    <i class='fas fa-map-marker-alt'></i>
                    <a style="color: white;">Liên Hệ</a>
                </button>
                <button type="button" class="btn">
                    <i class="material-icons">notifications_none</i>
                    <a style="color: white;">NOTIFICATIONS</a>
                </button>
                <button type="button" class="btn" style="margin-top: 50px;height: 50px;width: 300px;">
                    <i class="material-icons" style="font-size:26px;color: white;">cloud</i>
                    <a style="color: white;">UPGRADETO PRO</a>
                </button>
            </div>
            <div class="col-sm-9 border">

                <table id="example" class="display" style="width:100%">
                    <thead>
                        <tr>
                            <th>Loại Sản Phẩm</th>
                            <th>Image</th>
                            <th>Mã Sản Phẩm</th>
                            <th>Tên Sản Phẩm</th>
                            <th>Giá</th>
                            <th>Mô tả</th>
                            <th>Điều Hướng</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{# each listsanpham}}
                        <tr>
                            <td>
                                <p class="data">{{TenLoaiSP.TenLoaiSP}}</p>
                            </td>
                            <td style="text-align: center;">
                                <image src="http://localhost:3000/{{imageSP}}" class="data"
                                    style="height=50px;width: 50px">
                            </td>
                            <td>
                                <p class="data code">{{MaSP}}</p>
                            </td>
                            <td>
                                <p class="data name">{{TenSP}}</p>
                            </td>
                            <td>
                                <p class="data price">{{GiaSP}}</p>
                            </td>
                            <td>
                                <p class="data des">{{MotaSP}}</p>
                            </td>
                            <td>
                                <a href="javascript:void(0);" data-pd_id="{{_id}}" data-pd_tl="{{TenLoaiSP.TenLoaiSP}}"
                                    data-pd_code="{{MaSP}}" data-pd_name="{{TenSP}}" data-pd_price="{{GiaSP}}"
                                    data-pd_des="{{MotaSP}}" class="edit" data-toggle="modal"
                                    data-target="#myModal">Edit</a>
                                <a href="/deletesanpham/{{_id}}" class="btnDelete"
                                    onclick="return confirm('Are you sure to delete this song?')">Delete</a>
                            </td>
                        </tr>

                        {{/each}}
                    </tbody>
                    <tfoot>
                        <tr>

                            <th>Loại Sản Phẩm</th>
                            <th>Image</th>
                            <th>Mã Sản Phẩm</th>
                            <th>Tên Sản Phẩm</th>
                            <th>Giá</th>
                            <th>Mô tả</th>
                            <th>Điều Hướng</th>
                        </tr>
                    </tfoot>
                </table>

                <button type="button" data-toggle="modal" data-target="#exampleModalCenter"
                    class="kc_fab_main_btn">+</button>
                {{!-- model --}}
                <!-- Button trigger modal -->

                {{!-- m --}}
                <!-- Modal -->
                <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLongTitle">Thêm Sản Phẩm</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            {{!-- Form thêm sản phẩm  --}}
                            <form action="/uploadsanpham" method="POST" enctype="multipart/form-data">
                                <div class="form-group">
                                    <label>Mã Sản Phẩm</label>
                                    <input class="form-control" id="MaSP" name="MaSP">
                                </div>
                                <div class="form-group">
                                    <label for="exampleFormControlSelect1">Chọn Loại Sản Phẩm</label>
                                    <select class="form-control" id="LoaiSP" name="TenLoaiSP">
                                        {{#each loaisanpham}}
                                        <option value="{{_id}}">{{TenLoaiSP}}</option>
                                        {{/each}}
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Tên Sản Phẩm</label>
                                    <input class="form-control" id="TenSP" name="TenSP">
                                </div>
                                <div class=" form-group">
                                    <label>Giá Sản Phẩm</label>
                                    <input class="form-control" id="GiaSP" name="GiaSP">
                                </div>
                                <div class="form-group">
                                    <label for="exampleFormControlTextarea1">Mô Tả Sản Phẩm</label>
                                    <input class="form-control" id="MotaSP" name="MotaSP"></input>
                                </div>
                                <div class="form-group">
                                    <label for="exampleFormControlFile1">Chọn hình ảnh sản phẩm</label>
                                    <input type="file" class="form-control-file" id="imageSP" name="imageSP">
                                </div>
                                <div class="modal-footer">
                                    <button style="float: left;width: 100px;height:50px" type="button"
                                        class="btn btn-secondary" data-dismiss="modal">Hủy</button>
                                    <button type="submit" class="btn btn-primary">Thêm Sản Phẩm</button>
                                </div>
                            </form>
                            {{!-- Form thêm sản phẩm --}}
                        </div>
                    </div>
                </div>
                {{!-- model --}}
                {{!-- modal edit sanpham --}}
                <!-- Button to Open the Modal -->
                <!-- The Modal -->
            </div>
            {{!-- modal --}}
            {{!-- modaol --}}
        </div>
    </div>
    </div>
    </div>
    </div>
    </div>

    </div>

    <div class="modal" id="myModal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal body -->
                <div class="modal-body">
                    <form action="/editsanpham" method="POST" autocomplete="off">
                        <input class="id" type="hidden" name="_id">
                        <div class="form-group">
                            <label>Mã Sản Phẩm</label>
                            <input class="form-control code" id="MaSP" name="MaSP">
                        </div>
                        <div class="form-group">
                            <label for="exampleFormControlSelect1">Chọn Loại Sản Phẩm</label>
                            <select class="form-control" id="brandedt" name="TenLoaiSP">
                                {{#each loaisanpham}}
                                <option value="{{_id}}">{{TenLoaiSP}}</option>
                                {{/each}}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tên Sản Phẩm</label>
                            <input class="form-control name" name="TenSP">
                        </div>
                        <div class=" form-group">
                            <label>Giá Sản Phẩm</label>
                            <input class="form-control price" name="GiaSP">
                        </div>
                        <div class="form-group">
                            <label for="exampleFormControlTextarea1">Mô Tả Sản Phẩm</label>
                            <input class="form-control des" name="MotaSP"></input>
                        </div>
                        {{!-- <div class="form-group">
                                    <label for="exampleFormControlFile1">Chọn hình ảnh sản phẩm</label>
                                    <input type="file" class="form-control-file" id="imageSP" name="imageSP">
                                </div> --}}
                        <div class="modal-footer">
                            <button style="float: left;width: 100px;height:50px" type="button" class="btn btn-secondary"
                                data-dismiss="modal">Hủy</button>
                            <button type="submit" class="btn btn-primary">Cập Nhập Sản Phẩm</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {{!-- modal edit sanpham --}}
</body>

</html>
<script type="text/javascript">
    $(document).ready(function () {
        $('#example').DataTable();

        $('#example').on('click', '.edit', function () {


            var id = $(this).data('pd_id');
            var tenloaisanpham = $(this).data('pd_tl');
            var masanpham = $(this).data('pd_code');
            var tensanpham = $(this).data('pd_name');
            var giasanpham = $(this).data('pd_price');
            var motasanpham = $(this).data('pd_des');

           alert("data" + id);
            $('.id').val(id);
            $('.pd-tl').val(tenloaisanpham);
            $('.code').val(masanpham);
            $('.name').val(tensanpham);
            $('.price').val(giasanpham);
            $('.des').val(motasanpham);

            if ($('#brandedt option:selected').length > 0) {
                $('#brandedt option:selected').removeAttr("selected");
            }
            $("#brandedt option:contains(" + tenloaisanpham +
                ")").attr('selected', 'selected');

            $("#brandedt option:contains(" + tenloaisanpham +
                ")").prop('selected', true);



        })
    });


</script>